name: Build

on:
  push:
    branches:
      - main

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        -   uses: actions/checkout@v3
        -   name: Set up Python 3.10
            uses: actions/setup-python@v3
            with:
                python-version: "3.10"

        -   name: Install Python dependencies
            run: |
                    python -m pip install --upgrade pip
                    pip install numpy

        -   name: Compile, install and test native-template
            working-directory: native-template
            run: |
                    pip install .
                    python -c "import native_template; native_template.hello_world()"

        -   name: Compile, install and test numpy-template
            working-directory: numpy-template
            run: |
                    pip install .
                    python -c "import numpy_template; numpy_template.eye(5)"

